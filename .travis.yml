language: smalltalk
sudo: false

install:
  - pip install --user benchupload

os:
  - linux
#  - osx
services: 
  - mongodb
    - "2.6"
    - "3.0"
 
smalltalk:
  - Pharo-6.0
  - Pharo-5.0
  - Pharo-4.0

before_script:
  - "mongo --version"
  - "mongo test --eval 'db.createUser({ \"user\": \"pharounittest\", \"pwd\": \"test\", roles: [] });'"

# bob-bench xUnit file analysis
after_success:
  - benchupload --dir=$SMALLTALK_CI_BUILD
after_failure:
  - benchupload --dir=$SMALLTALK_CI_BUILD
